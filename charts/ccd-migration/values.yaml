job:
  image: 'hmctspublic.azurecr.io/ccd/migration:latest'
  kind: CronJob
  schedule: "0 22 * * *"
  ingressHost: ccd-migration-{{ .Values.global.environment }}.service.core-compute-{{ .Values.global.environment }}.internal
  aadIdentityName: ccd
  keyVaults:
    ccd:
      secrets:
        - name: idam-data-store-client-secret
          alias: IDAM_OAUTH2_DATA_STORE_CLIENT_SECRET
        - name: ccd-data-s2s-secret
          alias: DATA_STORE_IDAM_KEY
        - name: idam-data-store-system-user-username
          alias: IDAM_USER
        - name: idam-data-store-system-user-password
          alias: IDAM_PASS
  environment:
    IDAM_S2S_URL: http://rpe-service-auth-provider-{{ .Values.global.environment }}.service.core-compute-{{ .Values.global.environment }}.internal
    IDAM_API_URL: https://idam-api.{{ .Values.global.environment }}.platform.hmcts.net
    IDAM_CLIENT_ID: ccd_gateway
    CCD_DATA_STORE_API_BASE_URL: http://ccd-data-store-api-{{ .Values.global.environment }}.service.core-compute-{{ .Values.global.environment }}.internal
    MIGRATION_CASETYPE: case_type_1
    MIGRATION_QUERY_SIZE: 10000
    MIGRATION_CASE_LIMIT: 10000
